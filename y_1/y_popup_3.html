<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<style>
		.m_wrap {
			content: "";
			position: fixed;
			top: 0; right: 0; bottom: 0; left: 0;
			background: rgba(0,0,0,0.5);
			overflow: auto;
		}
		.m {
			position: absolute;
			top: 0; right: 0; bottom: 0; left: 0;
			max-width: 500px;
			margin: auto;
			padding: 25px;
			background: #fff;
		}
		.m img {
			max-width: 100%;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>Heading</h1>
		<hr>
		<div class="row">
			<col-xs-12>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Harum optio tempore a repellat laboriosam, magni architecto accusantium quidem quis, cupiditate quo explicabo voluptatum eos nemo, qui. Facere maxime ad voluptatum sint itaque, ullam, voluptatem voluptate vero dicta veniam quibusdam enim consectetur, placeat corporis? Vitae cupiditate harum sit, at, tempore aperiam maxime quisquam quia adipisci laudantium ipsum porro nam sapiente distinctio aliquam deleniti rem voluptates minima asperiores quidem. Enim cum nemo facere fugiat sint, voluptatum error debitis ut architecto beatae perferendis.</p>
				<p>Porro a cupiditate voluptate iusto minus odio beatae quaerat facilis velit, aspernatur aut ex veniam omnis qui recusandae consectetur rerum unde sint sunt itaque praesentium, illum. Aut magnam rerum animi totam aspernatur quae perferendis quibusdam sed laboriosam eum, soluta delectus iure ut pariatur non dolores, reprehenderit debitis corrupti quis vel quam! Repellat et sint culpa quam ea corrupti, repudiandae consectetur, consequuntur quibusdam molestias quaerat dolor cum nisi ipsam quas delectus totam minus neque voluptatibus quisquam ratione cupiditate ducimus a excepturi!</p>
				<p>Ut vel distinctio, harum pariatur ipsam consectetur quis corrupti? Dolorum omnis eveniet ullam deleniti at suscipit, harum dolor pariatur quis fuga, illum aut impedit quo quidem ex nam nisi minus nesciunt obcaecati. Vero earum dolores nobis facere ducimus distinctio cupiditate consectetur rerum reprehenderit ad. Ea dolorum aut recusandae, sint dicta maxime in asperiores ad ipsa aperiam obcaecati optio repellendus necessitatibus? Veritatis eveniet fugit quo, alias vitae, nihil nesciunt accusamus sit, quae adipisci animi aspernatur voluptatibus eos. Adipisci quo voluptatem sunt!</p>
			</col-xs-12>
		</div>
	</div>

	<div class="m_wrap">
		<div class="m">
		<blockquote>Универсальный способ. Преимущества – всё корректно и масштабируется под контент. Недостатки – добавил jQuery.</blockquote>
			
		<p>Porro a cupiditate voluptate iusto minus odio beatae quaerat facilis velit, aspernatur aut ex veniam omnis qui recusandae consectetur rerum unde sint sunt itaque praesentium, illum.</p>
		<p>
			<img height="200" src="http://lorempixel.com/450/200/" />
		</p>
		<button class="btn btn-primary" id="addContent">Добавить контент</button>
		</div>
	</div>
	
	<script>
		(function( $ ){
			
			// #######################################
			// ### modal1 plugin by Ivan Lukyanets ###
			// #######################################            
			
			$.fn.modal1 = function( options ) {
				
				var _this = this,
					settings = $.extend({
						margin: '5% auto',
					}, options );
				
				function getModalHeight( obj ) {
					var h = obj.innerHeight() - obj.height(); // add padding
					obj.find('> *').each(function(){
						h+= $(this).outerHeight(true); 
					});
					return h;
				}
				
				function redraw() {
					if (getModalHeight( _this ) > $(window).height()) {
						_this.css({
							'margin': settings.margin
						});
					}
					
					_this.css('height', getModalHeight( _this ));
				}
				
				$(window).bind('resize.modal1', function(){
					redraw();
				});
				
				return this.each(function( ){
					redraw();
				});
			};
			
			// ####################### end plugin #######################
			
			$('.m').modal1({
				'margin': '10% auto' // margin - задаёт отступ, если высота попапа больше чем у окна, дабы попап не прилепал
			});
			
			// добавляем контент
			$(document).on('click', '#addContent', function(){
				$(this).before('<p>Porro a cupiditate voluptate iusto minus odio beatae quaerat facilis velit, aspernatur aut ex veniam omnis qui recusandae consectetur rerum unde sint sunt itaque praesentium, illum.</p>');
				$('.m').modal1({'margin': '10% auto'});
			});
			
		})( jQuery );
	</script>
</body>
</html>